module esv/to-esv
imports 
	libstratego-lib
imports
  common
  spoofaxlang
imports 
	include/SpoofaxLang
	
signature constructors
  Module : ID * List(Import) * List(Section) -> Module

rules
  to-esv:
    (path, def) -> Module(name', [], sections)
    with
      name := <find-spoofax-module-name>;
      if !name => ParamName(n, p) then
        name' := n
      else
        Name(name') := name
      end;
      sections  := <collect-om(?ESVSection(<id>), conc)> def
