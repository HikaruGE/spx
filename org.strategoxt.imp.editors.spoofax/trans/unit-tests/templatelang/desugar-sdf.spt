module desugar-sdf

language SpoofaxLang
start symbol SdfProduction

test transform no-attrs() into attrs([]) [[ X = ]]
build test-templatelang-desugar to
  SdfProduction("X", [], attrs([]))

test transform SdfProductionWithCons without attrs into prod [[ X.Y = ]]
build test-templatelang-desugar-sdf to 
  prod([], sort("X"), attrs([term(default(appl(unquoted("cons"),[fun(quoted("\"Y\""))])))]))

test transform SdfProductionWithCons with attrs into prod [[ X.Y = {left} ]]
build test-templatelang-desugar-sdf to
  // NOTE: order of attributes is not important, but this cannot be tested 
  prod([], sort("X"), attrs([term(default(appl(unquoted("cons"),[fun(quoted("\"Y\""))]))),assoc(left)]))

test transform SdfProduction without attrs into prod [[ X = ]]
build test-templatelang-desugar-sdf to
  prod([], sort("X"), no-attrs())

test transform SdfProduction with attrs into prod [[ X = {right} ]]
build test-templatelang-desugar-sdf to
  prod([], sort("X"), attrs([assoc(right)]))
